import{I as i,B as m,a as l}from"./index.8eec1284.js";import{n as a,s as o}from"./index.82d6a689.js";const u={name:"Form",components:{Input:i,Button:m},data(){return{name:"",phone:"",errors:[]}},methods:{async submit(){const r=/[0-9+#-()]/,e=/[a-zA-Z]/;if(!this.name||!this.phone)return;if(!r.test(this.phone)||!e.test(this.name)){e.test(this.name)||this.setError({text:"Incorect name",type:"name"}),r.test(this.phone)||this.setError({text:"Incorect phone",type:"phone"});return}console.log("test");const t=await l.getUsers(),s=t.find(n=>n.username.trim()===this.name&&n.phone.split(" ")[0]===this.phone);if(s)return o.setUser(s),o.setUsersAll(t.length+1),this.$router.push({name:"User"});this.setError({text:"Not found user",type:"submit"})},setError({text:r,type:e}){if(this.errors.push({text:r,type:e}),e==="submit")return this.name="",this.phone="",this.$refs.name.$refs.input.focus();this[e]="",this.$refs[this.errors[0].type].$refs.input.focus()}},watch:{name(){this.name.length>0&&(this.errors=[])}}};var c=function(){var e=this,t=e._self._c;return t("form",{staticClass:"formLogin",on:{submit:function(s){return s.preventDefault(),e.submit.apply(null,arguments)}}},[t("div",{staticClass:"formLogin__block"},[t("Input",{ref:"name",attrs:{name:"name",errors:e.errors,type:"text",placeholder:"User Name"},model:{value:e.name,callback:function(s){e.name=typeof s=="string"?s.trim():s},expression:"name"}})],1),t("div",{staticClass:"formLogin__block"},[t("Input",{ref:"phone",attrs:{name:"phone",type:"phone",errors:e.errors,placeholder:"Phone Number"},model:{value:e.phone,callback:function(s){e.phone=typeof s=="string"?s.trim():s},expression:"phone"}})],1),e.errors.length&&e.errors[0].type==="submit"?t("div",[e._v(" "+e._s(e.errors[0].text)+" ")]):e._e(),t("div",{staticClass:"formLogin__block"},[t("Button",{attrs:{type:"submit"}},[e._v("Submit")])],1)])},h=[],p=a(u,c,h,!1,null,null,null,null);const f=p.exports,_={name:"Login",components:{Form:f},data(){return{test:!1}}};var d=function(){var e=this,t=e._self._c;return t("main",{staticClass:"login"},[t("Form")],1)},g=[],v=a(_,d,g,!1,null,null,null,null);const y=v.exports;export{y as default};
