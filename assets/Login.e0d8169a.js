import{I as a,B as m,a as l}from"./index.69faef43.js";import{n as i,s as o}from"./index.f1ab1be6.js";const h={name:"Form",components:{Input:a,Button:m},data(){return{name:"",phone:"",errors:[]}},methods:{async submit(){const s=/[0-9+#-()]/,e=/[a-zA-Z]/;if(!this.name||!this.phone)return this.setError({text:"\u0417\u0430\u043F\u043E\u0432\u043D\u0456\u0442\u044C \u0432\u0441\u0456 \u043F\u043E\u043B\u044F"});if(!s.test(this.phone)||!e.test(this.name)){e.test(this.name)||this.setError({text:"\u041D\u0435\u043A\u043E\u0440\u0435\u043A\u0442\u043D\u0435 \u0456\u043C'\u044F",type:"name"}),s.test(this.phone)||this.setError({text:"\u041D\u0435\u043A\u043E\u0440\u0435\u043A\u0442\u043D\u0438\u0439 \u0442\u0435\u043B\u0435\u0444\u043E\u043D",type:"phone"});return}const t=await l.getUsers(),r=t.find(n=>n.username.trim()===this.name&&n.phone.split(" ")[0]===this.phone);if(r)return o.setUser(r),o.setUsersAll(t.length+1),this.$router.push({name:"User"});this.setError({text:"Not found user"})},setError({text:s,type:e}){if(this.errors.push({text:s,type:e}),!e)return this.name="",this.phone="",this.$refs.name.$refs.input.focus();this[e]="",this.$refs[this.errors[0].type].$refs.input.focus()}},watch:{name(){var s;((s=this.errors)==null?void 0:s.length)&&this.name.length>0&&(this.errors=[])},phone(){var s;((s=this.errors)==null?void 0:s.length)&&this.phone.length>0&&(this.errors=[])}}};var c=function(){var e=this,t=e._self._c;return t("form",{staticClass:"formLogin",on:{submit:function(r){return r.preventDefault(),e.submit.apply(null,arguments)}}},[t("div",{staticClass:"formLogin__header"},[e._v("description")]),t("div",{staticClass:"formLogin__body"},[t("div",{staticClass:"formLogin__block"},[t("Input",{ref:"name",attrs:{name:"name",errors:e.errors,type:"text",placeholder:"User Name"},model:{value:e.name,callback:function(r){e.name=typeof r=="string"?r.trim():r},expression:"name"}})],1),t("div",{staticClass:"formLogin__block"},[t("Input",{ref:"phone",attrs:{name:"phone",type:"phone",errors:e.errors,placeholder:"Phone Number"},model:{value:e.phone,callback:function(r){e.phone=typeof r=="string"?r.trim():r},expression:"phone"}})],1),e.errors.length&&!e.errors[0].type?t("div",{staticClass:"error"},[e._v(" "+e._s(e.errors[0].text)+" ")]):e._e(),t("div",{staticClass:"formLogin__block"},[t("Button",{attrs:{type:"submit"}},[e._v("Submit")])],1)])])},p=[],u=i(h,c,p,!1,null,null,null,null);const f=u.exports,_={name:"Login",components:{Form:f},data(){return{test:!1}}};var d=function(){var e=this,t=e._self._c;return t("main",{staticClass:"login"},[t("Form")],1)},g=[],v=i(_,d,g,!1,null,null,null,null);const y=v.exports;export{y as default};
