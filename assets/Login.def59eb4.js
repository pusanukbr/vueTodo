import{I as i,B as l,a as _}from"./index.4a9b9913.js";import{n,s as a}from"./index.15e57ce5.js";const c={name:"Form",components:{Input:i,Button:l},data(){return{name:"",phone:"",errors:[]}},methods:{async submit(){const r=/[0-9+#-()]/,e=/[a-zA-Z]/;if(!this.name||!this.phone)return this.setError({text:"\u0417\u0430\u043F\u043E\u0432\u043D\u0456\u0442\u044C \u0432\u0441\u0456 \u043F\u043E\u043B\u044F"});if(!r.test(this.phone)||!e.test(this.name)){e.test(this.name)||this.setError({text:"\u041D\u0435\u043A\u043E\u0440\u0435\u043A\u0442\u043D\u0435 \u0456\u043C'\u044F",type:"name"}),r.test(this.phone)||this.setError({text:"\u041D\u0435\u043A\u043E\u0440\u0435\u043A\u0442\u043D\u0438\u0439 \u0442\u0435\u043B\u0435\u0444\u043E\u043D",type:"phone"});return}const t=await _.getUsers(),s=t.find(o=>o.username.trim()===this.name&&o.phone.split(" ")[0]===this.phone);if(s)return a.setUser(s),a.setUsersAll(t.length+1),this.$router.push({name:"User"});this.setError({text:"Not found user"})},setError({text:r,type:e}){if(this.errors.push({text:r,type:e}),!e)return this.name="",this.phone="",this.$refs.name.$refs.input.focus();this[e]="",this.$refs[this.errors[0].type].$refs.input.focus()}},watch:{name(){var r;((r=this.errors)==null?void 0:r.length)&&this.name.length>0&&(this.errors=[])},phone(){var r;((r=this.errors)==null?void 0:r.length)&&this.phone.length>0&&(this.errors=[])}}};var m=function(){var e=this,t=e._self._c;return t("form",{staticClass:"formLogin",on:{submit:function(s){return s.preventDefault(),e.submit.apply(null,arguments)}}},[t("div",{staticClass:"formLogin__header"},[e._v("description")]),t("div",{staticClass:"formLogin__body"},[t("div",{staticClass:"formLogin__description"},[e._v("description")]),t("div",{staticClass:"formLogin__block"},[t("div",{staticClass:"formLogin__field"},[t("Input",{ref:"name",attrs:{name:"name",errors:e.errors,type:"text",placeholder:"User Name"},model:{value:e.name,callback:function(s){e.name=typeof s=="string"?s.trim():s},expression:"name"}})],1),t("div",{staticClass:"formLogin__field"},[t("Input",{ref:"phone",attrs:{name:"phone",type:"phone",errors:e.errors,placeholder:"Phone Number"},model:{value:e.phone,callback:function(s){e.phone=typeof s=="string"?s.trim():s},expression:"phone"}})],1)]),e.errors.length&&!e.errors[0].type?t("div",{staticClass:"error"},[e._v(" "+e._s(e.errors[0].text)+" ")]):e._e(),t("Button",{attrs:{type:"submit"}},[e._v("Submit")])],1)])},f=[],h=n(c,m,f,!1,null,null,null,null);const u=h.exports,p={name:"Header"};var d=function(){var e=this,t=e._self._c;return t("header",{staticClass:"header"})},v=[],g=n(p,d,v,!1,null,null,null,null);const x=g.exports,C={name:"Footer"};var b=function(){var e=this,t=e._self._c;return t("footer",{staticClass:"footer"})},y=[],F=n(C,b,y,!1,null,null,null,null);const L=F.exports,$={name:"Login",components:{Form:u,Header:x,Footer:L},data(){return{test:!1}}};var E=function(){var e=this,t=e._self._c;return t("main",{staticClass:"login"},[t("Header"),t("main",{staticClass:"login__main"},[t("Form")],1),t("Footer")],1)},U=[],I=n($,E,U,!1,null,null,null,null);const k=I.exports;export{k as default};
