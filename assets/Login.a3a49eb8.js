import{I as a,B as i,a as m,s as u}from"./store.5aacb837.js";import{n as o}from"./index.7c34ef53.js";const h={name:"Form",components:{Input:a,Button:i},data(){return{name:"",phone:"",errors:[]}},methods:{async submit(){const n=/[0-9+#-()]/,e=/[a-zA-Z]/;if(!this.name||!this.phone)return;if(!n.test(this.phone)||!e.test(this.name)){e.test(this.name)||this.setError({text:"Incorect name",type:"name"}),n.test(this.phone)||this.setError({text:"Incorect phone",type:"phone"});return}console.log("test");const r=await m.getUsers(),t=r.find(s=>s.username.trim()===this.name&&s.phone.trim()===this.phone);if(t)return t.allUsers=r.length+1,u.setUser(t),this.$router.push({name:"User"});this.setError({text:"Not found user",type:"submit"})},setError({text:n,type:e}){if(this.errors.push({text:n,type:e}),e==="submit")return this.name="",this.phone="",this.$refs.name.$refs.input.focus();this[e]="",this.$refs[this.errors[0].type].$refs.input.focus()}},watch:{name(){this.name.length>0&&(this.errors=[])}}};var p=function(){var e=this,r=e._self._c;return r("form",{on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[r("Input",{ref:"name",attrs:{name:"name",errors:e.errors,type:"text",placeholder:"User Name"},model:{value:e.name,callback:function(t){e.name=typeof t=="string"?t.trim():t},expression:"name"}}),r("Input",{ref:"phone",attrs:{name:"phone",type:"phone",errors:e.errors,placeholder:"Phone Number"},model:{value:e.phone,callback:function(t){e.phone=typeof t=="string"?t.trim():t},expression:"phone"}}),e.errors.length&&e.errors[0].type==="submit"?r("div",[e._v(" "+e._s(e.errors[0].text)+" ")]):e._e(),r("Button",{attrs:{type:"submit"}},[e._v("Submit")])],1)},l=[],c=o(h,p,l,!1,null,null,null,null);const f=c.exports,_={name:"Login",components:{Form:f},data(){return{test:!1}}};var d=function(){var e=this,r=e._self._c;return r("main",[r("Form")],1)},g=[],v=o(_,d,g,!1,null,null,null,null);const y=v.exports;export{y as default};
