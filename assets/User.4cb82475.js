import{I as r,B as n,a as o,s as c}from"./store.5aacb837.js";import{n as a}from"./index.7c34ef53.js";const u={name:"AddTodo",components:{Input:r,Button:n},data(){return{title:"",userId:""}},methods:{async submit(){console.log("test");const s=await o.addTodo({title:this.title,userId:Number(this.userId),completed:!1});this.$emit("update:todo",s)}}};var d=function(){var t=this,e=t._self._c;return e("div",[e("form",{staticClass:"login__form",on:{submit:function(i){return i.preventDefault(),t.submit.apply(null,arguments)}}},[e("Input",{attrs:{type:"text",placeholder:"Title todo"},model:{value:t.title,callback:function(i){t.title=i},expression:"title"}}),e("Input",{attrs:{type:"text",placeholder:"Enter user ID"},model:{value:t.userId,callback:function(i){t.userId=i},expression:"userId"}}),e("Button",{attrs:{type:"submit"}},[t._v("Add Todo")])],1)])},f=[],_=a(u,d,f,!1,null,null,null,null);const p=_.exports;const v={name:"User",components:{AddTodo:p,Input:r},data(){return{user:c.user||null,lists:null,listsLocal:null,statusFilter:"",idFilter:"",titleFilter:"",favoritesKey:0}},async mounted(){this.lists=await o.getTodoList();const s=localStorage.getItem("favorites"),t=JSON.parse(s)||[];t&&this.lists.map(e=>{t.includes(e.id)&&(e.favorites=!0)})},computed:{filterCompleted(){return this.statusFilter!==""&&this.statusFilter==="completed"?s=>s.completed:null},filterUncompleted(){return this.statusFilter!==""&&this.statusFilter==="uncompleted"?s=>!s.completed:null},filterFavorites(){return this.statusFilter!==""&&this.statusFilter==="favorites"?s=>s.favorites:null},filterUserId(){return this.idFilter!==""?s=>s.userId===Number(this.idFilter):null},filterTitle(){return this.titleFilter!==""?s=>s.title.includes(this.titleFilter):null},filters(){return[this.filterCompleted,this.filterUncompleted,this.filterFavorites,this.filterUserId,this.filterTitle].filter(Boolean)},filteredItems(){return this.filters.length?this.lists.filter(s=>this.filters.every(t=>t(s))):this.lists},favorites(){return this.favoritesArr.includes(this.lists.id)}},methods:{changeStatusFilter({target:{value:s}}){this.statusFilter=s},changeIdFilter({target:{value:s}}){this.idFilter=s},async checkFavorites(s){const t=localStorage.getItem("favorites");let e=JSON.parse(t)||[];this.lists.map(i=>{i.id===s&&(i.favorites?(i.favorites=!1,e=e.filter(l=>Number(l)!==Number(s))):i.favorites||(i.favorites=!0,e.includes(s)||e.push(s)))}),this.favoritesKey+=1,localStorage.setItem("favorites",JSON.stringify(e))},updateTodo(s){this.lists.push(s)}}};var m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"about"},[t.user?e("div",{staticClass:"block__user"},[e("div",[t._v(t._s(t.user.id))]),e("div",[t._v(t._s(t.user.username))]),e("div",[t._v(t._s(t.user.phone))])]):t._e(),e("AddTodo",{on:{"update:todo":t.updateTodo}}),t.lists?e("div",{staticClass:"block__list"},[e("div",{staticClass:"block__filter"},[e("select",{staticClass:"select",attrs:{name:"filter"},on:{change:t.changeStatusFilter}},[e("option",{staticClass:"select--option",attrs:{value:""}},[t._v("All")]),e("option",{staticClass:"select--option",attrs:{value:"completed"}},[t._v("Completed")]),e("option",{staticClass:"select--option",attrs:{value:"uncompleted"}},[t._v(" Uncompleted ")]),e("option",{staticClass:"select--option",attrs:{value:"favorites"}},[t._v("Favorites")])]),e("select",{staticClass:"select",attrs:{name:"filter"},on:{change:t.changeIdFilter}},[e("option",{attrs:{value:""}},[t._v("All")]),t._l(t.user.allUsers,function(i){return e("option",{key:i,staticClass:"select--option",domProps:{value:i}},[t._v(" "+t._s(i)+" ")])})],2),e("div",[e("Input",{attrs:{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u0434\u0430\u043D\u0456 \u0434\u043B\u044F \u0444\u0456\u043B\u044C\u0442\u0440\u0430\u0446\u0456\u0457"},model:{value:t.titleFilter,callback:function(i){t.titleFilter=i},expression:"titleFilter"}})],1)]),t._l(t.filteredItems,function(i){return e("ul",{key:i.id,staticClass:"list__todos"},[e("li",{staticClass:"list__todo",class:{checked:i.completed}},[i.completed?e("font-awesome-icon",{attrs:{icon:["fas","toggle-on"]}}):e("font-awesome-icon",{attrs:{icon:["fas","toggle-off"]}}),e("span",[t._v("Title: "+t._s(i.title))]),e("font-awesome-icon",{key:t.favoritesKey,staticClass:"list__favorites--icon",attrs:{icon:["fas","star"],color:i.favorites?"red":null},on:{click:function(l){return t.checkFavorites(i.id)}}})],1)])})],2):t._e()],1)},h=[],F=a(v,m,h,!1,null,null,null,null);const I=F.exports;export{I as default};
